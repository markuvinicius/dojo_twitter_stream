# Dojo Twitter Stream

This project contains an application for capture Twitter posts by Twitter Stream API and a small Java Reactive API for 
integration with AWS Comprehend.

## Getting Started

These instructions will get you a copy of the project up and running on your local machine for development and testing purposes. 
See deployment for notes on how to deploy the project on a live system.

### Prerequisites

What things you need to install the software and how to install them

```
Docker Comunity Edition - 2.0.0.3 (https://docs.docker.com/install)
Docker Compose (https://docs.docker.com/compose/install/)
Java 8 (https://www.java.com/pt_BR/download/)
Apache Maven 3.6.1 (https://maven.apache.org/download.cgi)
```

### Installing

A step by step series of examples that tell you how to get a development env running

#### Building the Twitter Collector Docker Image

Once you have cloned the repository, proceed like that:

```
cd tweepy-collector;

docker build \                                                                                                                 
    --build-arg CONSUMER_TOKEN=<YOUR_TWITTER_CONSUMER_TOKEN> \
    --build-arg CONSUMER_SECRET=<YOUR_TWITTER_CONSUMER_SECRET> \
    --build-arg API_KEY=<YOUR_TWITTER_API_KEY> \
    --build-arg API_SECRET=<YOUR_TWITTER_API_SECRET> \
    -t tweepy-collector .
```
The arguments in the above command are:
* <YOUR_TWITTER_CONSUMER_TOKEN>: You should put your Twitter Consumer Key Here
* <YOUR_TWITTER_CONSUMER_SECRET>: You should put your Twitter Consumer Secret Here
* <YOUR_TWITTER_API_KEY>: You should put your Twitter API Key Here
* <YOUR_TWITTER_API_SECRET>: Your should put your Twitter API Secret Here

To see how to get your Twitter Credentials, check https://developer.twitter.com/

#### Building Twitter Reactive Comprehend API

In order to run the Twitter Reactive Comprehend API you need to build the container image. To accomplish this task, proceed like that:

```
cd TwitterRxApi;

mvn clean package -Pdev;

docker build \
--build-arg AWS_ACCESS_KEY_ID=<YOUR_AWS_ACCESS_KEY_ID> \
--build-arg AWS_SECRET_KEY=<YOUT_AWS_SECRET_KEY> \
--build-arg JAR_FILE=target/<APPLICATION.JAR> \
-t datadealers/twitter-rx-comprehend \
.
``` 
The arguments in the above command are:
* <YOUR_AWS_ACCESS_KEY_ID>: You should put your AWS ACCESS KEY Here. 
* <YOUT_AWS_SECRET_KEY>: You should put your AWS SECRET KEY here.
* <APPLICATION.JAR>: You should put yout application name corresponding to the version generated by the package command.

To change the application version, change the version number in [pom.xml] file
To find out how to generate an aws access key, check this link out: https://aws.amazon.com/premiumsupport/knowledge-center/create-access-key/

<b>Important</b> 
The access key passed to the application must have access to the AWS Comprehend service. To find out how it works, please check this link out: https://docs.aws.amazon.com/comprehend/latest/dg/access-control-overview.html


#### Running the Composer

The database and collector app are conteinerized at the docker-compose.yml file. To run those apps, you should execute:

```
docker-compose up -d
```

After that, you should have two containers running: A MongoDB document database and a Python Twitter Streamer. To check it out, run the command above:

```
docker-compose ps
```
#### Calling the Reactive API 

##### Get All the Tweets

```
curl localhost:5000/tweets
```

##### Get the Tweet Entities

With a twitter post in hands, now you can interact with the amazon comprehend capabilities. 
In order to extract entities from the text, you can call the api like that:


```
curl localhost:5000/tweets/{id}/comprehend-entities
```

##### Get the Tweet Sentiments

With a twitter post in hands, now you can interact with the amazon comprehend capabilities. 
In order to extract sentiment from the text, you can call the api like that:


```
curl localhost:5000/tweets/{id}/comprehend-sentiment
```

##### Get the Tweet Key Phrases

With a twitter post in hands, now you can interact with the amazon comprehend capabilities. 
In order to extract key phrases from the text, you can call the api like that:


```
curl localhost:5000/tweets/{id}/comprehend-keyphrases
```


## Deployment

To Be Defined

## Built With

* [SpringBoot] (https://spring.io/projects/spring-boot) - Used to develop the Rest API
* [WebFlux] (https://projectreactor.io/) - Reactive Extensions
* [Python 3.6) (https://www.python.org/) - Programming languange applied at Collector Worker
* [Tweepy] (https://www.tweepy.org/) - Python twitter wrapper
* [MongoDB] (https://www.mongodb.com/) - Document Database
* [Maven] (https://maven.apache.org/) - Dependency Management
* [AWS Java SDK] (https://aws.amazon.com/pt/sdk-for-java/) - AWS Services Integration

## Contributing

To be defined

## Versioning

To be defined

## Authors

* **Marku Vin√≠cius** - *Initial work* - [markuvinicius](https://github.com/markuvinicius)

To be defined

## License

To be defined

## Acknowledgments

* Inspiration:
* * Push yourself, because no one else is going to do it for you.

